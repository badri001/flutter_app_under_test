# Automatically generated on 2023-01-18 UTC from https://codemagic.io/app/63c7d7771cab967328055029/settings
# Note that this configuration is not an exact match to UI settings. Review and adjust as necessary.

workflows:
  default-workflow:
    name: Default Workflow
    max_build_duration: 60
    environment:
      flutter: default
      xcode: latest
      cocoapods: default
    scripts:
        - name : Install dependencies 
        script : 
        - pwd 
        - ls
        - npm install -g appium@next 
        - npm install -g appium-doctor 
        - appium driver install --source=npm appium-flutter-driver
        - appium driver install xcuitest
        - appium driver list 
        - cd example/nodejs
        - npm install
      - cd example/flutter_app_under_test && flutter packages pub get
      - name : Launch Appium 
        script : nohup appium --base-path /wd/hub
      - APPIUM_OS=ios npm start
    artifacts:
      - example/flutter_app_under_test/*.snap
      - example/flutter_app_under_test/build/windows/**/*.msix
      - example/flutter_app_under_test/flutter_drive.log
    publishing:
      email:
        recipients:
          - bathri2060@gmail.com
